[tool.poetry]
name = "biotrack"
version = "0.5.4"
description = "Tracker based on BioClip and CoTracker3 developed by MBARI"
authors = ["danellecline <dcline@mbari.org>"]
license = "Apache"
readme = "README.md"
repository = "https://github.com/mbari-org/biotrack"
packages = [{include = "biotrack"}]
exclude = ["tests"]

[tool.poetry.scripts]
sdcat = "biotrack.__main__:cli"

[tool.poetry.dependencies]
python = ">=3.10,<3.12"
imageio = {extras = ["ffmpeg"], version = "^2.36.0"}
torch = "^2.3.1"
click = "8.1.7"
cotracker = {git = "https://github.com/facebookresearch/co-tracker.git"}
opencv-python-headless = "4.10.0.84"
piexif = "^1.1.3"
scipy = "^1.14.1"
open-clip-torch = "^2.29.0"


[build-system]
requires = ["poetry-core"]
build-backend = "poetry.core.masonry.api"

[tool.ruff]
line-length = 200
exclude = ["co-tracker"]

[tool.semantic_release]
branch = "main"
commit_message = "{version}\n\nAutomatically generated by python-semantic-release"
tag_format = "v{version}"
commit_version_number = true
allow_zero_version = true
commit_parser = "angular"
logging_use_named_masks = true
major_on_zero = true
assets = []
version_variables = ["biotrack/__init__.py:__version__"]
version_toml = ["pyproject.toml:tool.poetry.version"]
build_command = "pip install poetry && poetry build"

[tool.semantic_release.commit_parser_options]
allowed_tags = [
    "build",
    "chore",
    "ci",
    "docs",
    "feat",
    "fix",
    "perf",
    "style",
    "refactor",
    "test"
]
minor_tags = ["feat"]
patch_tags = ["fix", "perf"]